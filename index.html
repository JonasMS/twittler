<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body>
    <script>

      $(document).ready(function(){

        var loadFeed = function(username){
          var $body = $('body');
          $body.html('');

          // var index = streams.home.length - 1;

          // var index = streams[username]['length']-1;
          var feed = (username === 'home') ? streams['home'] : streams['users'][username];

          var index = feed.length-1;
          while(index >= 0){
            var tweet = feed[index];

            //create elements
            //TODO: create var div = '<div></div>' for efficiency
            div = '<div></div>';
            var $container = $(div);
            var $username = $('<span></span>');
            var $user = $(div);
            var $tweet = $(div);
            var $timestamp = $(div);

            //insert content into elements
            $username.text('@' + tweet.user + ':');
            // $username.val(tweet.user);
            $tweet.text(tweet.message);
            $timestamp.text('At ' + tweet.created_at);

            //add elements to DOM
            $container.appendTo($body);
            $user.appendTo($container);
            $username.appendTo($user);
            $tweet.appendTo($container);
            $timestamp.appendTo($container);

            //add styling to elements
            $container.addClass('container');
            $username.addClass('username');
            $user.addClass('user');
            $tweet.addClass('tweet');
            $timestamp.addClass('timestamp');


            index -= 1;
          }

        };

        loadFeed('home');

        $('.user .username').on('click', function(){
          var username = $(this).text().slice(1, -1);
          loadFeed(username);
        });

        // $('.user .username').on('mouseenter', function(){
        //   console.log('test succesful');
        // });



        /*
        Problem: access a user's timeline by clicking on his username
        Solution:
          * streams.users access object full of follwed users
          1. make username a clickable element
          2. give username element val = username
          3. on 'click' 
            i. clear body
            ii. load user's feed


        */


      });

    </script>
  </body>
</html>
